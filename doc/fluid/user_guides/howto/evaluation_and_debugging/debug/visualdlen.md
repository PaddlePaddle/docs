# Visual DL Tools
<p align="center">
  <img src="https://raw.githubusercontent.com/PaddlePaddle/VisualDL/develop/docs/images/vs-logo.png" width="60%" />
</p>

## Introduction
VisualDL is a visualization tool for deep learning tasks. It includes functions such as scalar, parameter distribution, model structure, image visualization, etc. The project is in high-speed iteration, and new components will be added continuously.

Currently, most DNN platforms use Python as the configuration language. VisualDL natively supports the use of Python. By adding a few lines to the Python configuration of the model, it can provide rich visual support for the training process.

In addition to the Python SDK, the underlying Visual DL is written in C++, and its exposed C++ SDK can be integrated into other platforms for native performance and customization.

## Component
VisualDL currently supports 4 components:

- graph
- scalar
- image
- histogram

### Graph
Compatible with ONNX [Open Neural Network Exchange](https://github.com/onnx/onnx) , through integration with the Python SDK, VisualDL is compatible with most mainstream DNN platforms including PaddlePaddle, pytorch, mxnet.

<p align="center">
  <img src="https://raw.githubusercontent.com/daming-lu/large_files/master/graph_demo.gif" width="60%" />
</p>

### Scalar
Can be used to demonstrate the error trend of training tests

<p align="center">
<img src="https://raw.githubusercontent.com/daming-lu/large_files/master/loss_scalar.gif" width="60%"/>
</p>

### Image
Can be used to visualize any tensor, or image generated by model.

<p align="center">
<img src="https://raw.githubusercontent.com/daming-lu/large_files/master/loss_image.gif" width="60%"/>
</p>

### Histogram

Used to visualize the trend of the distribution of elements in any tensor.

<p align="center">
<img src="https://raw.githubusercontent.com/daming-lu/large_files/master/histogram.gif" width="60%"/>
</p>

## Quick Start
Use the following command to quickly test VisualDL.

```
# Install, the suggestion is in the virtual environment or anaconda.
pip install --upgrade visualdl

# Run an example, vdl_create_scratch_log will create a test log
vdl_create_scratch_log
visualDL --logdir=scratch_log --port=8080

# Visit http://127.0.0.1:8080
```

If there is a problem in the above steps, it is probably due to different versions or different locations of python or pip. The following installation methods can solve the issue.

## Installing with virtualenv

[Virtualenv](https://virtualenv.pypa.io/en/stable/) creates a stand-alone Python environment and also ensures that the relative positions of Python and pip are correct.

On macOS, install pip and virtualenv as follows:
```
sudo easy_install pip
pip install --upgrade virtualenv
```

On Linux, install pip and virtualenv as follows:
```
sudo apt-get install python3-pip python3-dev python-virtualenv
```

Then create a virtual environment:
```
virtualenv ~/vdl # for Python2.7
virtualenv -p python3 ~/vdl for Python 3.x
```

```~/vdl``` is your Virtualenv directory, you can also choose any directory.

Activate the virtual environment as follows:
```
source ~/vdl/bin/activate
```

Now install VisualDL and run the example:

```
pip install --upgrade visualdl

# Run an example, vdl_create_scratch_log will create a test log
vdl_create_scratch_log
visualDL --logdir=scratch_log --port=8080

#Visit http://127.0.0.1:8080
```

If it appears `TypeError: __init__() got an unexpected keyword argument 'file'`, the reason is that the protobuf is not 3.5 or higher. You can run `pip install --upgrade protobuf` to solve it.

If you still encounter installation problems in a virtual environment, try the following methods.


## Installing with Anaconda

Anaconda is a Python distribution for scientific computing that provides package management and environment management capabilities to easily handle multi-version python coexistence, switching, and various third-party package installation issues.

Please download and install Anaconda according to the instructions of [Anaconda Download Website](https://www.anaconda.com/download).
Download the Python 3.6 version of the command-line installer.

Create a conda environment named ```vdl``` or any name:
```
conda create -n vdl pip python=2.7 # or python=3.3, etc.
```

Activate the conda environment as follows:
```
source activate vdl
```

Now install VisualDL and run the example:

```
pip install --upgrade visualdl

# Run an example, vdl_create_scratch_log will create a test log
vdl_create_scratch_log
visualDL --logdir=scratch_log --port=8080

#Visit http://127.0.0.1:8080
```

If you are still experiencing installation issues, try the following source code installation method.

### Installing with code
```
# It is suggested you be in a virtual environment or anaconda.
git clone https://github.com/PaddlePaddle/VisualDL.git
cd VisualDL

python setup.py bdist_wheel
pip install --upgrade dist/visualdl-*.whl
```

If you encounter other packaging and installation problems, or just want to run Visual DL without installing it, you can read [here](https://github.com/PaddlePaddle/VisualDL/blob/develop/docs/develop/how_to_dev_frontend_cn.md)


## SDK
VisualDL also provides the python SDK and the C++ SDK for different ways.

### Python SDK
VisualDL now supports Python 2 and Python 3.

Take the simplest Scalar component as an example, try to create a scalar component and insert data of multiple time steps:

```python
import random
from visualdl import LogWriter

logdir = "./tmp"
logger = LogWriter(logdir, sync_cycle=10000)

# mark the components with 'train' label.
with logger.mode("train"):
	# create a scalar component called 'scalars/scalar0'
	scalar0 = logger.scalar("scalars/scalar0")

# add some records during DL model running.
for step in range(100):
	Scalar0.add_record(step, random.random())
```

### C++ SDK
The C++ SDK version of the above code in the Python SDK is as follows :
```c++
#include <cstdlib>
#include <string>
#include "visualdl/sdk.h"

namespace vs = visualdl;
namespace cp = visualdl::components;

int main() {
  const std::string dir = "./tmp";
  vs::LogWriter logger(dir, 10000);

  logger.SetMode("train");
  auto tablet = logger.AddTablet("scalars/scalar0");

  cp::Scalar<float> scalar0(tablet);

  for (int step = 0; step < 1000; step++) {
    float v = (float)std::rand() / RAND_MAX;
    scalar0.AddRecord(step, v);
  }

  return 0;
}
```
## Launch Board
When the log data has been generated during the training, you can start the board to preview the visual information in real time.

```
visualDL --logdir <some log dir>
```

Board also supports the following parameters to achieve remote access:

- `--host` set IP
- `--port` set port
- `--model_pb` specifies the model file of ONNX format
